<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Gemini proxy image display
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Gemini%20proxy%20image%20display&In-Reply-To=%3C20200910133827.13f89aba%40celehner.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002641.html">
   <LINK REL="Next"  HREF="002644.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Gemini proxy image display</H1>
    <B>Charles E. Lehner</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Gemini%20proxy%20image%20display&In-Reply-To=%3C20200910133827.13f89aba%40celehner.com%3E"
       TITLE="Gemini proxy image display">cel at celehner.com
       </A><BR>
    <I>Thu Sep 10 18:38:27 BST 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002641.html">Gemini proxy image display
</A></li>
        <LI>Next message (by thread): <A HREF="002644.html">Gemini proxy image display
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2642">[ date ]</a>
              <a href="thread.html#2642">[ thread ]</a>
              <a href="subject.html#2642">[ subject ]</a>
              <a href="author.html#2642">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Mr. Leveck,

I looked into it more, comparing this broken image:
<A HREF="https://leveck.us/gemini/1436.ninja/the_servers.png">https://leveck.us/gemini/1436.ninja/the_servers.png</A>

with the good original:
<A HREF="gemini://1436.ninja/the_servers.png">gemini://1436.ninja/the_servers.png</A>

The proxied one has this header &quot;&lt;!-- GEMINI! --&gt;&lt;!-- 1436.ninja/the_servers.png --&gt;&lt;!-- 192.168.0.45 --&gt;&quot;. That breaks the image. Also, in the content at byte 24576 (0x6000), the files diverge. The proxied one seems to restart sending the PNG image there, with some bytes missing. Maybe a variable is incorrectly set in your code?

Charles

On Thu, 10 Sep 2020 11:35:10 -0600
&quot;Mr. Leveck&quot; &lt;<A HREF="https://lists.orbitalfox.eu/listinfo/gemini">leveck at leveck.us</A>&gt; wrote:

&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> On 9/10/20 11:27 AM, Alex Schroeder wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I'm thinking you're going to toss out 8K which is probably much more
</I>&gt;<i> &gt; than just the status and the meta data. fread is going to read past
</I>&gt;<i> &gt; the \r\n terminating the status and it'll keep reading... and then
</I>&gt;<i> &gt; you toss it all out. I think what you need to do is read
</I>&gt;<i> &gt; everything, and then search and toss all the bytes up to the first
</I>&gt;<i> &gt; \n or something like that.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Cheers
</I>&gt;<i> &gt; Alex
</I>&gt;<i> 
</I>&gt;<i> One would think, but that is not the case. Since everyone is hung up
</I>&gt;<i> on that instead of my actual query, I have captured that initial
</I>&gt;<i> status and now display it on the top of <A HREF="gemini://">gemini://</A> pages on the proxy.
</I>&gt;<i> Prior to that I was 100% successful in capturing all the document
</I>&gt;<i> content the proxy code was requesting. All I have done now is
</I>&gt;<i> assigned it to a var named $status and print that in a displayed page
</I>&gt;<i> header.
</I>&gt;<i> 
</I>&gt;<i> I am looking for advice on binary files. If anyone has any thoughts
</I>&gt;<i> on that, it would be much appreciated.
</I>&gt;<i> 
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 833 bytes
Desc: OpenPGP digital signature
URL: &lt;<A HREF="https://lists.orbitalfox.eu/archives/gemini/attachments/20200910/8baca035/attachment.sig">https://lists.orbitalfox.eu/archives/gemini/attachments/20200910/8baca035/attachment.sig</A>&gt;
</PRE>










































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002641.html">Gemini proxy image display
</A></li>
	<LI>Next message (by thread): <A HREF="002644.html">Gemini proxy image display
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2642">[ date ]</a>
              <a href="thread.html#2642">[ thread ]</a>
              <a href="subject.html#2642">[ subject ]</a>
              <a href="author.html#2642">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
