<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Client behavior when server doesn't close connection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Client%20behavior%20when%20server%20doesn%27t%20close%20connection%3F&In-Reply-To=%3Cj8tQ-1EhCX34oz-bxmi_ovdwCio0pOWJxeO96pBGVSGi3ZBsnG48VNNtoL4xHefENxApo-fh65LzvCMRLel0ZGGohe8m3Mh9A6oG3wNi0XU%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002138.html">
   <LINK REL="Next"  HREF="002143.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Client behavior when server doesn't close connection?</H1>
    <B>colecmac at protonmail.com</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Client%20behavior%20when%20server%20doesn%27t%20close%20connection%3F&In-Reply-To=%3Cj8tQ-1EhCX34oz-bxmi_ovdwCio0pOWJxeO96pBGVSGi3ZBsnG48VNNtoL4xHefENxApo-fh65LzvCMRLel0ZGGohe8m3Mh9A6oG3wNi0XU%3D%40protonmail.com%3E"
       TITLE="Client behavior when server doesn't close connection?">colecmac at protonmail.com
       </A><BR>
    <I>Thu Jul  9 15:38:46 BST 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002138.html">Client behavior when server doesn't close connection?
</A></li>
        <LI>Next message (by thread): <A HREF="002143.html">Client behavior when server doesn't close connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2142">[ date ]</a>
              <a href="thread.html#2142">[ thread ]</a>
              <a href="subject.html#2142">[ subject ]</a>
              <a href="author.html#2142">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> I changed the client so it doesn't try to read the whole response before parsing
</I>&gt;<i> the header. And added timeout to make sure the connection is closed.
</I>
This sounds like the way to go! You can't reply on the server being compliant. I wish
we'd get a stream status code so you could know when to disable that, though...

Also for the record, my Go clients never experience this &quot;not closing the connection&quot;
issue. Amfora attempts to load all the data before displaying it (this will change),
and I've never had any problems with that on any servers. It always finds the end of
the data fine, presumably indicated by a closed connection. Maybe the Go TLS
implementation is just more robust?

makeworld
</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002138.html">Client behavior when server doesn't close connection?
</A></li>
	<LI>Next message (by thread): <A HREF="002143.html">Client behavior when server doesn't close connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2142">[ date ]</a>
              <a href="thread.html#2142">[ thread ]</a>
              <a href="subject.html#2142">[ subject ]</a>
              <a href="author.html#2142">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
