<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Client behavior when server doesn't close connection?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Client%20behavior%20when%20server%20doesn%27t%20close%20connection%3F&In-Reply-To=%3C5a416869-87b0-0095-2c3b-1971b59a480f%40envs.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002168.html">
   <LINK REL="Next"  HREF="002133.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Client behavior when server doesn't close connection?</H1>
    <B>juhani</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Client%20behavior%20when%20server%20doesn%27t%20close%20connection%3F&In-Reply-To=%3C5a416869-87b0-0095-2c3b-1971b59a480f%40envs.net%3E"
       TITLE="Client behavior when server doesn't close connection?">juhani at envs.net
       </A><BR>
    <I>Thu Jul  9 13:27:54 BST 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="002168.html">About limiting the non human internet bandwidth pollution
</A></li>
        <LI>Next message (by thread): <A HREF="002133.html">Client behavior when server doesn't close connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2132">[ date ]</a>
              <a href="thread.html#2132">[ thread ]</a>
              <a href="subject.html#2132">[ subject ]</a>
              <a href="author.html#2132">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm juhani, new here, and implementing an Android gemini client.

While testing with live sites for the first time I found that some sites worked,
and on others the response handling hung. Comparison of tcp streams revealed
that on the working sites the last packet from the server had FIN flag, and on
the failing sites it didn't.

I changed the client so it doesn't try to read the whole response before parsing
the header. And added timeout to make sure the connection is closed.

These changes make sense to me, but what should the client do if it cant be sure
it has the complete payload? With line based content it's possible to show what
you've got. The clients I've tried, so far, seem to do that, but is it correct?
And what about binary content?


~juhani

<A HREF="gemini://envs.net/~juhani">gemini://envs.net/~juhani</A>
<A HREF="https://git.envs.net/juhani/minigem">https://git.envs.net/juhani/minigem</A>

</PRE>











































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="002168.html">About limiting the non human internet bandwidth pollution
</A></li>
	<LI>Next message (by thread): <A HREF="002133.html">Client behavior when server doesn't close connection?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2132">[ date ]</a>
              <a href="thread.html#2132">[ thread ]</a>
              <a href="subject.html#2132">[ subject ]</a>
              <a href="author.html#2132">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
