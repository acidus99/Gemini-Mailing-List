<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Caching%20and%20sizes%2C%0A%20the%20explosion%20of%20responise%20codes%20%28was%20Re%3A%20Caching%20and%20status%20codes%29&In-Reply-To=%3C20201108074946.GH30302%40brevard.conman.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003133.html">
   <LINK REL="Next"  HREF="003135.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)</H1>
    <B>Sean Conner</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Caching%20and%20sizes%2C%0A%20the%20explosion%20of%20responise%20codes%20%28was%20Re%3A%20Caching%20and%20status%20codes%29&In-Reply-To=%3C20201108074946.GH30302%40brevard.conman.org%3E"
       TITLE="Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)">sean at conman.org
       </A><BR>
    <I>Sun Nov  8 07:49:46 GMT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="003133.html">Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)
</A></li>
        <LI>Next message (by thread): <A HREF="003135.html">Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3134">[ date ]</a>
              <a href="thread.html#3134">[ thread ]</a>
              <a href="subject.html#3134">[ subject ]</a>
              <a href="author.html#3134">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>It was thus said that the Great <A HREF="https://lists.orbitalfox.eu/listinfo/gemini">khuxkm at tilde.team</A> once stated:
&gt;<i> November 8, 2020 12:18 AM, &quot;Sean Conner&quot; &lt;<A HREF="https://lists.orbitalfox.eu/listinfo/gemini">sean at conman.org</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; I have my own ideas about caching, but I want to cobble up a
</I>&gt;<i> &gt; proof-of-concept first before I talk about it more, because from where I
</I>&gt;<i> &gt; come from, working code is worth more than talk.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; -spc
</I>&gt;<i> 
</I>&gt;<i> Speaking of cobbling up proof-of-concepts, I've created a proof-of-concept
</I>&gt;<i> of how I feel these cache-hint success codes would work:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="https://gist.github.com/febd3f5ae2308e8b55449a92c6e58a65">https://gist.github.com/febd3f5ae2308e8b55449a92c6e58a65</A>
</I>&gt;<i> 
</I>&gt;<i> (Yes, I know it's on GitHub, but I have a shell script to make Gists from
</I>&gt;<i> the command line and so I want to use it.)
</I>&gt;<i> 
</I>&gt;<i> This includes a spartan client (it literally just spits the raw protocol
</I>&gt;<i> response out at you) with caching behavior influenced by 21/22 (in
</I>&gt;<i> practice, it caches all 2x responses except for 22 responses), as well as
</I>&gt;<i> examples of endpoints to hit that return each code.
</I>&gt;<i> 
</I>&gt;<i> Hopefully my working code will prove my point better than I could in words.
</I>
  And I have my &quot;proof-of-concept&quot; up at well.  It's at

	<A HREF="gemini://gemini.conman.org/test/testcache.gemini">gemini://gemini.conman.org/test/testcache.gemini</A>

  My approach is a bit different, probably a bit harder to implement server
side, but deals not only with the caching issue, but with repeated requests. 
I'm not sure how popular it will be, but hey, it's out there, and it only
adds one general purpose status code (23 for now) that means:

	okay, request was okay, but there is no data to serve you.

  How it works:  A plain request:

	<A HREF="gemini://gemini.conman.org/test/cachefile.txt">gemini://gemini.conman.org/test/cachefile.txt</A>

will always return the content.  However, if you include a timestamp using a
path parameter (which is *NOT* the same as a query paramter, and is in the
ISO-8601 format):

	<A HREF="gemini://gemini.conman.org/test/cachefile.txt;2020-11-08T00:00:00">gemini://gemini.conman.org/test/cachefile.txt;2020-11-08T00:00:00</A>

If the file is *newer* than that timestamp, you get the normal response of
20 and all the content; otherwise you get a response of 23 (with the normal
MIME type) and no content, meaning it hasn't changed since the given date.

  This means a client that doesn't with to deal with caching at all will
never see any difference.  A client that does, or (in the case of feeds) not
want to always download content that hasn't changed, can do that as well.

  -spc

</PRE>
























<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="003133.html">Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)
</A></li>
	<LI>Next message (by thread): <A HREF="003135.html">Caching and sizes, the explosion of responise codes (was Re: Caching and status codes)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3134">[ date ]</a>
              <a href="thread.html#3134">[ thread ]</a>
              <a href="subject.html#3134">[ subject ]</a>
              <a href="author.html#3134">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
