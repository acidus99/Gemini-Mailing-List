<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [tech] Questions about cache
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20%5Btech%5D%20Questions%20about%20cache&In-Reply-To=%3COt9SinnXh1d7c_C6XmB7e8pYDrL5UQjDWUO6Haqv0e8Xp50-wdWxcTMukhH8WvYAxM15iCqWiq4uoYT-eamgNPsoJr0XJP04Heym32qoFPc%3D%40protonmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004310.html">
   <LINK REL="Next"  HREF="004371.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[tech] Questions about cache</H1>
    <B>colecmac at protonmail.com</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20%5Btech%5D%20Questions%20about%20cache&In-Reply-To=%3COt9SinnXh1d7c_C6XmB7e8pYDrL5UQjDWUO6Haqv0e8Xp50-wdWxcTMukhH8WvYAxM15iCqWiq4uoYT-eamgNPsoJr0XJP04Heym32qoFPc%3D%40protonmail.com%3E"
       TITLE="[tech] Questions about cache">colecmac at protonmail.com
       </A><BR>
    <I>Thu Dec 24 20:12:23 GMT 2020</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="004310.html">[tech] Questions about cache
</A></li>
        <LI>Next message (by thread): <A HREF="004371.html">[tech] Questions about cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4367">[ date ]</a>
              <a href="thread.html#4367">[ thread ]</a>
              <a href="subject.html#4367">[ subject ]</a>
              <a href="author.html#4367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> On an Amfora-related note: makeworld talked about the caching on
</I>&gt;<i> IRC the other day, and another user brought up that it seemed like
</I>&gt;<i> Amfora presented cached content when a previously-visited link was
</I>&gt;<i> clicked. Makeworld commented that this was unintended, and said they
</I>&gt;<i> would fix it for a later release. (At least that&#8217;s how I remember it;
</I>&gt;<i> maybe makeworld can weigh in.)
</I>

Wow, a lot of talk about Amfora in this thread. I'll respond to this, and
some other things.

What I remember from that IRC conversation was that another user (probably bie)
said that Amfora was using the cache, not when a link was clicked, but when
it was typed in the bottom bar. This should not be happening in my opinion,
but it is. I've opened an issue to address this, and yes, it will be fixed
in the next release.

<A HREF="https://github.com/makeworld-the-better-one/amfora/issues/159">https://github.com/makeworld-the-better-one/amfora/issues/159</A>


&gt;<i>From Stephane's original email:
</I>
&gt;<i> So I was a bit surprised when I was putting together some dynamic
</I>&gt;<i> content for my capsule and found that my client (amfora) was caching
</I>&gt;<i> things. I was able to get around it by using temporary redirects to add
</I>&gt;<i> cache busting query strings.
</I>
Amfora does not use the cache for redirects. That is, if the server redirects
the client to a cached page, Amfora will not use the cache to load that page.
The code for this change can be seen here:

<A HREF="https://github.com/makeworld-the-better-one/amfora/commit/b05885e7100a18fb7afae5d388173b7795c274ec">https://github.com/makeworld-the-better-one/amfora/commit/b05885e7100a18fb7afae5d388173b7795c274ec</A>

So if your dynamic content was using redirects already, it should be okay.


nytpu wrote:

&gt;<i> Looking at the Amfora code, it seems like there's 3 limits to the
</I>&gt;<i> cache[1]: number of pages, size in bytes, and number of seconds. This
</I>&gt;<i> seems to be configurable[2],and it looks like it *should* (I may be
</I>&gt;<i> misreading the code) hard reload the page when you refresh a tab[3].
</I>
All correct. There are some other things that disable cache as well. Redirects,
and client certs. Any page that Amfora sends a client cert to will not
be cached, and this helps with dynamic apps like Astrobotany.


It sounds like the consensus in this thread is that Amfora should not be
using the cache when the user &quot;clicks&quot; a link. I suppose that makes sense,
but I find that for a lot of cases using the cache improves the browsing
experience. Most content on Gemini is static, and so it's nice when the page
loads instantly, it really makes a noticeable difference, despite how fast
Gemini is.

I'm not quite sure what to do here, as I don't want to break apps, but I
want browsing static content to be nice as well. Thoughts?

Cheers,
makeworld
</PRE>

































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="004310.html">[tech] Questions about cache
</A></li>
	<LI>Next message (by thread): <A HREF="004371.html">[tech] Questions about cache
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4367">[ date ]</a>
              <a href="thread.html#4367">[ thread ]</a>
              <a href="subject.html#4367">[ subject ]</a>
              <a href="author.html#4367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
