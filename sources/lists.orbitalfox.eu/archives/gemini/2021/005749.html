<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [spec] Certificate trust
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20%5Bspec%5D%20Certificate%20trust&In-Reply-To=%3C20210228203253.584a2942%40perso.pw%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005748.html">
   <LINK REL="Next"  HREF="005767.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[spec] Certificate trust</H1>
    <B>Solene Rapenne</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20%5Bspec%5D%20Certificate%20trust&In-Reply-To=%3C20210228203253.584a2942%40perso.pw%3E"
       TITLE="[spec] Certificate trust">solene at perso.pw
       </A><BR>
    <I>Sun Feb 28 19:32:53 GMT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005748.html">[spec] Certificate trust
</A></li>
        <LI>Next message (by thread): <A HREF="005767.html">[spec] Certificate trust
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5749">[ date ]</a>
              <a href="thread.html#5749">[ thread ]</a>
              <a href="subject.html#5749">[ subject ]</a>
              <a href="author.html#5749">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 28 Feb 2021 20:27:26 +0100
C&#244;me Chilliet &lt;<A HREF="https://lists.orbitalfox.eu/listinfo/gemini">come at chilliet.eu</A>&gt;:

&gt;<i> Hello,
</I>&gt;<i> 
</I>&gt;<i> I have been using lagrange for a few months to browse Gemini, and I realize that I&#8217;m already making a habit of ignoring certificate mismatch warnings, and blindly trusting any certificate that shows.
</I>&gt;<i> 
</I>&gt;<i> The certificate trust is one of the weak point of the current specification I think, and it would need to be clarified.
</I>&gt;<i> 
</I>&gt;<i> Firstly, there is the idea of TOFU, but it does not say on which part of the certificate the TOFU works (some people consider it&#8217;s the whole certificate, some only the fingerprint), and it does not say how much the certificate needs to be valid (I&#8217;ve seen on the ML some people considering that a wrong domain in a certificate and a past expiration date should be ignored by clients). Reading the specification it appears that it recommends using fingerprint and to consider past expiration date invalid.
</I>&gt;<i> Secondly, there is the good old CA system, nowadays mostly using letsencrypt. It seems badly supported in most clients which still use TOFU in this case and will complain at each renewal.
</I>&gt;<i> A third possibility I think would be to use DANE and base validation on the DNS system, but I&#8217;ve not seen anyone advocating this, is there anything wrong with that idea?
</I>&gt;<i> 
</I>&gt;<i> I&#8217;m failing to see how TOFU can provide any security, especially if there is no way to announce a renewal by sending both new and old cert or something, there is a MITM possibility at each renewal. The only TOFU example I&#8217;ve seen cited is openssh, which seems offtopic because you usually do not ssh into random machine on the internet by following links like you do with Gemini.
</I>&gt;<i> 
</I>&gt;<i> C&#244;me
</I>&gt;<i> 
</I>&gt;<i> 
</I>
Hi,

I suggested something on IRC a while ago, I'm not sure this would
be a good idea but I'll share it here.

Instead of TOFU, 2 mecanisms could be used:

1) Check chain of trust of the certificate, with let's encrypt and
other provider (they are not alone anymore) it's easy to get a valid
certificate

2) If 1 is invalid, let's (introduce something new here) check if
DNS doesn't have a TXT field with the certificate fingerprint and
see if it matches the current one, accept if OK

3) if 2 found a TXT that doesn't match, tell the user, if it matches,
accepts, if no TXT, TOFU?

The fingerprint published in DNS is already done for SSH fingerprint
using a SSHFP field. This allows to have a third party check. I
agree it's not absolutely perfect but, it gives the opportunity for
an extra check.

This wouldn't have any backward incompatibilities because it's up
to the client to implement it, if a person hosting a gemini server
doesn't want to host it, just do TOFU as usual.
</PRE>

























































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005748.html">[spec] Certificate trust
</A></li>
	<LI>Next message (by thread): <A HREF="005767.html">[spec] Certificate trust
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5749">[ date ]</a>
              <a href="thread.html#5749">[ thread ]</a>
              <a href="subject.html#5749">[ subject ]</a>
              <a href="author.html#5749">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
