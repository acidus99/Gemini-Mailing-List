<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Molly Brown Certificate Zone Help
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Molly%20Brown%20Certificate%20Zone%20Help&In-Reply-To=%3CCAHvN2xzmraJFFkph5FKjagx9jjq0fXbqU278MR_Oh4gK1C29Rg%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005243.html">
   <LINK REL="Next"  HREF="005259.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Molly Brown Certificate Zone Help</H1>
    <B>Lindsay</B> 
    <A HREF="mailto:gemini%40lists.orbitalfox.eu?Subject=Re%3A%20Molly%20Brown%20Certificate%20Zone%20Help&In-Reply-To=%3CCAHvN2xzmraJFFkph5FKjagx9jjq0fXbqU278MR_Oh4gK1C29Rg%40mail.gmail.com%3E"
       TITLE="Molly Brown Certificate Zone Help">newsspeak11 at gmail.com
       </A><BR>
    <I>Sun Feb 14 00:31:18 GMT 2021</I>
    <P><UL>
        <LI>Previous message (by thread): <A HREF="005243.html">Source Code Control (git)
</A></li>
        <LI>Next message (by thread): <A HREF="005259.html">Molly Brown Certificate Zone Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5225">[ date ]</a>
              <a href="thread.html#5225">[ thread ]</a>
              <a href="subject.html#5225">[ subject ]</a>
              <a href="author.html#5225">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings all,

I am trying to set up a server using Molly Brown and am having trouble
implementing its &quot;Certificate Zone&quot; feature. If this isn't the correct
forum for this question, please let me know.

So far, I've set a directory require a certificate and successfully tested
it - I am free to access all areas on the site and receive a certificate
challenge to the one directory as configured.

The problem I'm having is understanding how to add a specific client
fingerprint to the &quot;allowed&quot; list in the config file. The Molly Brown
documentation specify an allowed value takes the format of &quot;hex-encoded
SHA256 fingerprints of client certificates&quot;. I have what I think is a valid
fingerprint that I then converted into hex added to this section (which is
significantly longer than any of the examples provided), but the
corresponding certificate is rejected when provided.

I am certain this is user error. I have very little knowledge on how to
manage certificates and rely on google searches when generated the correct
ones for this server. Assuming the values provided in the example config
file are based on real, working values, my value is nearly 4 times as long.

Here's what I did:
1. Generate a new key with following command:

&gt;<i> openssl req -new -newkey rsa:4096 -x509 -sha256 -days 3650 -nodes -out
</I>&gt;<i> cert.crt -keyout key.key
</I>&gt;<i>
</I>2. Changed extension on output keys to .pem as required by Kristall Browser
3. Imported ley and cer into Kristall
4. Converted the fingerprint of the cert into hexadecimal with the
following command:

&gt;<i> echo -n &quot;[Fingerprint went here]&quot; | od -A n -t x1
</I>&gt;<i>
</I>&gt;<i> 5. Copied hexadecimal value into Molly Brown configuration file so the section looks like this:
</I>
[CertificateZones]

&quot;^/foo/&quot; = [
&gt;<i> #       &quot;d146953386694266175d10be3617427dfbeb751d1805d36b3c7aedd9de02d9af&quot;,
</I>&gt;<i>
</I>&gt;<i> &quot;aa1ee9e5a1572a4677e9f59e181b5c6a27527c7602bd441e7bf909f681db2eb36c32246c5193a270fcfbc509fef9349b03d6a299907580c90566c881752a01adcd9055fae1e53a308c56020462849b42ab777d67c9c5e3fd0427ec6d42a997&quot;,
</I>&gt;<i> ]
</I>&gt;<i>
</I>6. Relaunch Molly Brown

Apologies if this is an elementary problem or the incorrect forum for
such a question and appreciate any help that is provided.

Tanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.orbitalfox.eu/archives/gemini/attachments/20210213/e5b52f27/attachment.htm">https://lists.orbitalfox.eu/archives/gemini/attachments/20210213/e5b52f27/attachment.htm</A>&gt;
</PRE>





































































<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message (by thread): <A HREF="005243.html">Source Code Control (git)
</A></li>
	<LI>Next message (by thread): <A HREF="005259.html">Molly Brown Certificate Zone Help
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5225">[ date ]</a>
              <a href="thread.html#5225">[ thread ]</a>
              <a href="subject.html#5225">[ subject ]</a>
              <a href="author.html#5225">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.orbitalfox.eu/listinfo/gemini">More information about the Gemini
mailing list</a><br>
</body></html>
